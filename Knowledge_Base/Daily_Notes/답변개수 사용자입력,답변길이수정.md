**ìš”ì²­í•˜ì‹  ë‘ ê°€ì§€ ê¸°ëŠ¥ì„ ë°˜ì˜í•œ ê°œì„  ì½”ë“œ**ì…ë‹ˆë‹¤.  
ì¤‘ë³µ ê²°ê³¼ ì œê±° ë° ê²€ìƒ‰ ê²°ê³¼ ê¸¸ì´ ì¡°ì •ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

---

### **ê°œì„ ëœ ì „ì²´ ì½”ë“œ**
```python
import os
from langchain_community.document_loaders import DirectoryLoader, TextLoader
from langchain_community.embeddings import OpenAIEmbeddings
from langchain_community.vectorstores import Chroma

# ì„¤ì • ë³€ìˆ˜
EMBEDDING_MODEL = "text-embedding-ada-002"
PERSIST_DIR = "./chroma_db"
KNOWLEDGE_DIR = "./Knowledge_Base"

# (1) ëª¨ë¸/DB ìºì‹± ë¡œì§
if not os.path.exists(PERSIST_DIR):
    print("â³ ì²˜ìŒ ì‹¤í–‰: ë¬¸ì„œ ë¡œë”© ë° ë²¡í„° DB ìƒì„± ì¤‘...")
    loader = DirectoryLoader(
        KNOWLEDGE_DIR,
        glob='**/*.md',
        loader_cls=TextLoader,
        loader_kwargs={'encoding': 'utf-8'},
        recursive=True,
        show_progress=True
    )
    docs = loader.load()
    embeddings = OpenAIEmbeddings(model=EMBEDDING_MODEL)
    db = Chroma.from_documents(docs, embeddings, persist_directory=PERSIST_DIR)
    db.persist()
    print("âœ… ë²¡í„° DB ìƒì„± ì™„ë£Œ")
else:
    print("ğŸš€ ê¸°ì¡´ ë²¡í„° DB ë¡œë”© ì¤‘...")
    embeddings = OpenAIEmbeddings(model=EMBEDDING_MODEL)
    db = Chroma(persist_directory=PERSIST_DIR, embedding_function=embeddings)
    print("âœ… DB ë¡œë”© ì™„ë£Œ")

# (2) ê°œì„ ëœ ê²€ìƒ‰ í•¨ìˆ˜
def search(query: str, top_n: int = 3, min_length: int = 500):
    results = db.similarity_search_with_score(query, k=top_n*2)  # í›„ë³´êµ° í™•ì¥
    
    seen = set()  # ì¤‘ë³µ ê²€ì‚¬ìš©
    filtered = []
    
    for doc, score in results:
        doc_id = doc.metadata.get('source', 'unknown')
        if doc_id not in seen:
            seen.add(doc_id)
            # ê¸¸ì´ ì¡°ì • (min_length ì ìš©)
            content = doc.page_content
            if len(content) < min_length:
                content += "..."  # ì§§ì€ ê²½ìš° í‘œì‹œ
            else:
                content = content[:min_length] + "..."
            filtered.append((doc, score, content))
            if len(filtered) >= top_n:
                break
    
    print(f"\nğŸ” '{query}' ê²€ìƒ‰ ê²°ê³¼ (ìƒìœ„ {len(filtered)}ê°œ):")
    for i, (doc, score, content) in enumerate(filtered, 1):
        print(f"\n[{i}] (ìœ ì‚¬ë„: {score:.2f})")
        print(f"ì¶œì²˜: {doc.metadata['source']}")
        print(f"ë‚´ìš©: {content}")

# (3) ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬
if __name__ == "__main__":
    while True:
        query = input("\nâ“ ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš” (ì¢…ë£Œ: q): ")
        if query.lower() == 'q':
            break
        
        # ì‚¬ìš©ì ì •ì˜ ì˜µì…˜
        try:
            top_n = int(input("ğŸ“Œ í‘œì‹œí•  ê²°ê³¼ ê°œìˆ˜ (ê¸°ë³¸ 3): ") or 3)
            min_length = int(input("ğŸ“Œ ìµœì†Œ ë‚´ìš© ê¸¸ì´ (ê¸°ë³¸ 500ì): ") or 500)
        except ValueError:
            print("âš ï¸ ìˆ«ìë§Œ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤. ê¸°ë³¸ê°’ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.")
            top_n, min_length = 3, 500
        
        search(query, top_n=top_n, min_length=min_length)
```

---

### **ì£¼ìš” ê°œì„  ì‚¬í•­**
#### **1. ì‚¬ìš©ì ì •ì˜ ê²€ìƒ‰ ì˜µì…˜**
- **ê²°ê³¼ ê°œìˆ˜**: `top_n` ë§¤ê°œë³€ìˆ˜ ì¶”ê°€ (ê¸°ë³¸ 3)
- **ë‚´ìš© ê¸¸ì´**: `min_length` ë§¤ê°œë³€ìˆ˜ ì¶”ê°€ (ê¸°ë³¸ 500ì)

#### **2. ì¤‘ë³µ ê²°ê³¼ í•„í„°ë§**
- `seen` ì…‹ì„ ì‚¬ìš©í•´ ë™ì¼ ë¬¸ì„œ ì¤‘ë³µ ì œê±°
- ìœ ì‚¬ë„ ì ìˆ˜ ìˆœìœ¼ë¡œ ì •ë ¬ ìœ ì§€

#### **3. ìŠ¤ë§ˆíŠ¸ ê¸¸ì´ ì¡°ì ˆ**
- ì§§ì€ ë¬¸ì„œ: `...` ì¶”ê°€
- ê¸´ ë¬¸ì„œ: ì§€ì •í•œ ê¸¸ì´ë§Œí¼ ìë¥´ê¸°

---

### **ì‹¤í–‰ ì˜ˆì‹œ**
```bash
â“ ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš” (ì¢…ë£Œ: q): LLM ë°°ì¹˜ í¬ê¸°
ğŸ“Œ í‘œì‹œí•  ê²°ê³¼ ê°œìˆ˜ (ê¸°ë³¸ 3): 5
ğŸ“Œ ìµœì†Œ ë‚´ìš© ê¸¸ì´ (ê¸°ë³¸ 500ì): 1000

ğŸ” 'LLM ë°°ì¹˜ í¬ê¸°' ê²€ìƒ‰ ê²°ê³¼ (ìƒìœ„ 5ê°œ):

[1] (ìœ ì‚¬ë„: 0.92)
ì¶œì²˜: LLM_Optimization.md
ë‚´ìš©: LLM í•™ìŠµ ì‹œ ë°°ì¹˜ í¬ê¸°(batch size)ëŠ” 32 ê¶Œì¥...
(1000ìê¹Œì§€ í‘œì‹œ)

[2] (ìœ ì‚¬ë„: 0.88)
ì¶œì²˜: Training_Tips.md
ë‚´ìš©: ë°°ì¹˜ í¬ê¸°ê°€ ë„ˆë¬´ í¬ë©´ ë©”ëª¨ë¦¬ ë¶€ì¡±...
(1000ìê¹Œì§€ í‘œì‹œ)

[3] (ìœ ì‚¬ë„: 0.85)
ì¶œì²˜: Performance_Guide.md
ë‚´ìš©: GPU ë©”ëª¨ë¦¬ì— ë”°ë¼ ë°°ì¹˜ í¬ê¸° ì¡°ì ˆ í•„ìš”...
(1000ìê¹Œì§€ í‘œì‹œ)

[4] (ìœ ì‚¬ë„: 0.81)
ì¶œì²˜: Hardware_Requirements.md
ë‚´ìš©: RTX 4090 ê¸°ì¤€ ìµœëŒ€ ë°°ì¹˜ í¬ê¸°...
(1000ìê¹Œì§€ í‘œì‹œ)

[5] (ìœ ì‚¬ë„: 0.77)
ì¶œì²˜: Troubleshooting.md
ë‚´ìš©: ë°°ì¹˜ í¬ê¸° 1024ë¡œ ì„¤ì • ì‹œ ë°œìƒí•˜ëŠ” ë¬¸ì œ...
(1000ìê¹Œì§€ í‘œì‹œ)
```

---

### **ì¶”ê°€ ê°œì„  ê°€ëŠ¥ ì˜ì—­**
1. **ë™ì  ê¸¸ì´ ì¡°ì ˆ**:
   ```python
   # ë¬¸ì„œ ì „ì²´ ê¸¸ì´ì˜ 70%ë§Œ í‘œì‹œ
   content_length = int(len(doc.page_content) * 0.7)
   ```
2. **í˜•ì‹ ê°•ì¡°**:
   ```python
   from rich.console import Console
   console = Console()
   console.print(f"[bold]{content}[/bold]")
   ```
3. **JSON ì¶œë ¥**:
   ```python
   import json
   print(json.dumps(results, indent=2, ensure_ascii=False))
   ```

ì´ì œ **ì‚¬ìš©ì ë§ì¶¤í˜• ê²€ìƒ‰**ê³¼ **ê³ í’ˆì§ˆ ê²°ê³¼**ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸ˜Š